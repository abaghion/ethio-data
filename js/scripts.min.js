var isMobile=$(window).width()<=768,url=window.location.href;let searchParams=new URLSearchParams(window.location.search),lang=searchParams.get("lang")||"en";$.getJSON("data/mps_5th_"+lang+".json",function(t){function a(){a=$(".control-sort select").val();var o,a=jz.arr.sortBy(t,a,"asc"),e=(o={},$(".control-filter select").each(function(a,e){var t=$(e).attr("data-column"),e=$(e).val();"all"!=e&&(o[t]=e)}),0==Object.keys(o).length?(o=null,$(".clear-filters").addClass("inactive").removeClass("active")):$(".clear-filters").removeClass("inactive").addClass("active"),o);return e?_.where(a,e):a}function e(a){$(".pols-wrapper").empty(),$("#stats").html("<h1>"+a.length+" members</h1><br/>"),a.forEach(function(a,e){$(".pols-wrapper").append("<div class='pol pol-"+e+"'></div>"),$(".pol-"+e).append("<div class='pol-photo'></div>"),$(".pol-"+e+" .pol-photo").append("<a target='_blank' href='"+a.url+"'><img src='"+url+"img/pol/"+a.photo+"' /></a>"),$(".pol-"+e).append("<div class='pol-text'></div>"),$(".pol-"+e+" .pol-text").append("<a target='_blank' href='"+a.url+"'><div class='pol-name'>"+a.name+"</div></a>"),$(".pol-"+e+" .pol-text").append("<div class='pol-sub pol-party'><b>"+a.party+"</b></div>"),$(".pol-"+e+" .pol-text").append("<div class='pol-sub pol-description'>"+a.constituency+", "+a.region+"</div>")}),o()}function o(){$(".pol-photo").each(function(a,e){var t=$(this).width();$(this).height(t)})}e(jz.arr.sortBy(t,"name","asc")),$(".control select").change(function(){e(a())}),_.chain(t).pluck("party").uniq().value().sort().map(function(a){var e={};return e.name=a,e.abbr=_.where(t,{party:a})[0].party,e}).forEach(function(a){$(".select-party").append("<option value='"+a.name+"'>"+a.name+"</option>")}),_.chain(t).pluck("region").uniq().value().sort().forEach(function(a){$(".select-region").append("<option>"+a+"</option>")}),$(document).on("click",".clear-filters.active",function(){$(".control-filter select").each(function(a,e){$(this).val("all")}),e(a())}),o(),$(window).resize(o)});